
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>

.audio-container {
    position: relative;
    max-width: 100%;
    margin: 0 auto;
    text-align: center;
}

.responsive-canvas {
    width: 100%;
    height: auto;
    background-color: black;
}

        body {
            font-family: 'Consolas', monospace;
            margin: 0;
            padding: 0;
            background-color: 0;
            background-image: url('./bg.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background-color: #212529;
            color: #fff;
            text-align: center;
            padding: 10px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        #dynamic-title {
            font-size: 2.5em;
            font-weight: bold;
            margin: 0;
            color: #F2E9E4;
            opacity: 0;
            transition: opacity 3s ease-in-out;
            animation: fadeInOut 3s infinite;
        }

        @keyframes fadeInOut {
            0%, 100% {
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
        }

        .container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            width: 100%;
            max-width: 800px;
            margin-top: -100px;
            box-sizing: border-box;
        }

        canvas {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            background-color: #000;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .controls {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 100%;
            max-width: 500px;
            margin-top: 20px;
            gap: 10px;
        }

        input[type="file"], button {
            padding: 5px;
            border: none;
            border-radius: 50px;
            background-color: #212529;
            color: #F2E9E4;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
        }

        input[type="file"]:hover, button:hover {
            background-color: #999;
        }

        p {
            font-size: 1.2em;
            margin-bottom: 20px;
            text-align: center;
            color: #F2E9E4;
        }

        audio {
            width: 100%;
            max-width: 600px;
            margin: 20px 0;
            outline: none;
        }

        audio::-webkit-media-controls-panel {
            background-color: #212529;
        }

        audio::-webkit-media-controls-play-button,
        audio::-webkit-media-controls-current-time-display,
        audio::-webkit-media-controls-time-remaining-display,
        audio::-webkit-media-controls-timeline,
        audio::-webkit-media-controls-volume-slider,
        audio::-webkit-media-controls-mute-button,
        audio::-webkit-media-controls-seek-back-button,
        audio::-webkit-media-controls-seek-forward-button {
            filter: invert(100%);
        }

        @media (max-width: 768px) {
            #dynamic-title {
                font-size: 2em;
            }

            canvas {
                height: 150px;
            }

            p {
                font-size: 1em;
            }

            .controls {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            #dynamic-title {
                font-size: 1.5em;
            }

            p {
                font-size: 0.9em;
            }

            input[type="file"], button {
                padding: 8px;
                font-size: 0.9em;
            }

            audio {
                margin-top: 30px;
            }
        }
    </style>
</head>
<body>
     <div class="navbar">
        <h1 id="dynamic-title">Audio frequencies</h1>
    </div>
    <div class="audio-container">
    <input type="file" id="audio-upload" accept="audio/*">
    <audio id="audio-player" controls style="display: none;">
        <source id="audio-source" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <canvas id="spectrogram" class="responsive-canvas" style="display: none;"></canvas>
</div>
</div>
   <script>
    document.addEventListener('DOMContentLoaded', function() {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const audioElement = document.getElementById('audio-player');
    const audioSource = document.getElementById('audio-source');
    const canvas = document.getElementById('spectrogram');
    const canvasCtx = canvas.getContext('2d');
    const analyser = audioContext.createAnalyser();
    
    analyser.fftSize = 2048;
    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;

    function drawSpectrogram() {
        requestAnimationFrame(drawSpectrogram);

        analyser.getByteFrequencyData(dataArray);

        canvasCtx.fillStyle = 'black';
        canvasCtx.fillRect(0, 0, canvas.width, canvas.height);

        let barWidth = (canvas.width / bufferLength) * 2.5;
        let barHeight;
        let x = 0;

        for (let i = 0; i < bufferLength; i++) {
            barHeight = dataArray[i];

            const red = barHeight + 100;
            const green = 250 - barHeight;
            const blue = 50;

            canvasCtx.fillStyle = `rgb(${red},${green},${blue})`;
            canvasCtx.fillRect(x, canvas.height - barHeight / 2, barWidth, barHeight / 2);

            x += barWidth + 1;
        }
    }

    // Configurar el canvas para ser responsivo cuando la ventana cambia de tamaÃ±o
    window.addEventListener('resize', () => {
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
    });

    document.getElementById('audio-upload').addEventListener('change', function(event) {
        const files = event.target.files;
        if (files.length > 0) {
            const file = files[0];
            const fileURL = URL.createObjectURL(file);
            audioSource.src = fileURL;

            audioElement.style.display = 'block';
            canvas.style.display = 'block';

            audioElement.load();
            audioElement.play();

            const source = audioContext.createMediaElementSource(audioElement);
            source.connect(analyser);
            analyser.connect(audioContext.destination);

            drawSpectrogram();
        }
    });
});
</script>
</body>
</html>